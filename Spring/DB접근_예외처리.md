# 스프링의 DB 접근 예외처리 방식

**스프링은 예외를 전환하고 추상화함으로써 기술에 종속되지 않고 일관성 있는 예외를 제공한다.**

# 예외 전환

자바가 제공하는 예외는 체크 예외와 언체크 예외로 구분된다.

**체크 예외**: 명시적으로 예외를 처리했는지, 컴파일러가 체크한다.<br>
**언체크 예외**: 명시적으로 예외를 처리하지 않아도 된다.

## 예외 처리 방법

예외를 처리하는 방법은 크게 3가지가 있다.

### 예외 복구

* 발생한 예외를 적절하게 처리한 후, 정상 흐름으로 전환
* 로그만 남기는 것은 복구가 아니다. 반드시 원인을 해결해야 복구라고 할 수 있다.

### 예외처리 회피

* 발생한 예외를 자신을 호출한 곳으로 던져버리는 것
* 무책임한 회피는 지양해야 한다.
* 만약 호출한 쪽에서 처리해야 하는 의도가 확실한 경우는 전달이라고 표현

### 예외 전환

* 발생한 예외를 다른 예외로 바꾸는 것
* 크게 두 가지 목적을 가진다.

#### 전환의 두 가지 목적

* 발생한 예외의 의도를 더 명확하게 하기 위해
* 처리를 용이하게 하기 위해(체크 → 언체크)

DB와 관련된 예외들은 보통 바로 해결할 수 없기 때문에 최대한 빨리 언체크 예외로 전환해주는 것이 좋다. 스프링은 자바가 제공하는 체크 예외를 언체크 예외로 전환해준다.

# 예외 추상화

사용하는 DB의 종류와 DB 접근 기술에 따라 발생하는 예외의 종류도 다르다. 이로 인해 기술에 종속적으로 코드를 작성하게 되고, 변경의 파급 효과가 증가하게 된다. 스프링이 제공하는 DataAccessException 클래스는 DB의 종류와 DB 접근 기술에 상관없이 일관된 예외로 추상화해준다. 스프링은 내부적으로 DB와 DB 접근 기술 별로 매핑 정보를 관리하고 이를 통해 공통된 예외로 추상화한다.

## DataAccessException의 한계

DB 에러 코드를 바로 해석하는 JDBC와 달리 ORM 기술 등은 각 기술에서 재정의 한 예외를 바탕으로 스프링 예외로 변환한다. 각 기술이 재정의한 예외들은 보통 세분화 되어있지 않기 때문에 스프링 예외로 변환하는 과정에서 포괄적으로 변환할 수밖에 없다. 따라서 발생한 예외를 직접 세분화 해야하는 한계가 있다.