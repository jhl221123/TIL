# 객체지향의 5대 원칙 SOLID

객체지향의 개념과 특성을 이해하는 것도 중요하지만 이해한 내용을 바탕으로 잘 사용하는 것도 중요하다. 객체지향 설계를 보다 잘할 수 있도록, 수많은 시행착오 끝에 만들어진 원칙이 SOLID다.

## 단일 책임의 원칙(SRP)

#### 변경해야 하는 이유는 하나여야 한다.

좋은 설계는 낮은 결합도와 높은 응집도를 가진다. 낮은 결합도는 재사용성과 유지보수성을 높여주며, 높은 응집도로 인해 필요한 책임만을 가지고 올바른 역할을 수행할 수 있다.

객체가 너무 많은 역할과 책임을 가지고 있다는 것은 결합도가 높고 응집도가 낮다는 의미다. 추상화를 통한 모델링 과정에서 역할에 맞는 책임만 가지도록 설계해야 하며, 이를 통해 변경의 유연함과 유지보수성을 높일 수 있다.

단일 책임이라고 했지만 사실 의미가 모호할 수 있다. 설계 상황과 문맥에 따라 책임의 크기가 클 수도 있고 작을 수도 있다. 따라서 '반드시 하나'에 초점을 맞추기보단 변경의 파급효과를 고려해 책임의 기준을 적절히 고려하는 것도 중요하다.

## 개방 폐쇄 원칙(OCP)

#### 확장에는 열려있고 변경에는 닫혀있어야 한다.

다르게는 '확장하기 쉽지만, 확장으로 인해 변경되는 것이 없어야 한다.'라고도 표현할 수 있다.

자바에서 OCP 원칙을 지키는 대표적인 예로는 JDBC가 있다. 데이터베이스의 종류를 변경해도 자바 코드는 변경되지 않는다. 드라이버만 변경해 주면 어떤 곳도 수정할 필요가 없다.(물론 커넥션 설정은 수정해야 한다.)

개방 폐쇄 원칙을 지켜야만 객체지향적인 설계를 할 수 있는 것은 아니지만 객체지향의 가장 큰 장점인 유연성과 유지보수성을 얻으려면 원칙을 지켜야 한다.

## 리스코프 치환 원칙(LSP)

#### 하위 클래스의 인스턴스는 상위 클래스의 인스턴스의 역할을 수행할 수 있어야 한다.

상속을 **분류**의 개념으로 올바르게 사용한다면 자연스럽게 해당 원칙을 지킬 수 있지만, 자바의 상속을 **조직도 또는 계층 구조**의 개념으로 사용한다면 해당 원칙을 위반할 수 있다.

```java
동물 호랑이 = new 호랑이(); //O

할아버지 아버지 = new 아버지(); //X
```

상위 클래스는 상위 분류라고 했다. 상위 분류에 속하는 하위 분류는 상위 분류가 가지는 역할에 맞게 구현되어야 한다. 이는 단순히 물리적으로 컴파일에 성공하는 것과는 별개로 논리적으로도 적절해야 한다.

![Alt text](<이미지/LSP 논리적 오류.png>)

위 그림처럼 자동차 인터페이스가 제공하는 기능을 구현하더라도 논리적으로 맞지 않다면, 하위 클래스를 신뢰할 수 없다. 따라서 상위 분류가 제공하는 규약을 모두 지켜야만 신뢰하고 사용할 수 있다.

## 인터페이스 분리 원칙(ISP)

#### 클라이언트는 사용하지 않는 메서드에 의존해서는 안 된다.

ISP는 SRP와 같은 문제를 다른 방식으로 해결한다. SRP는 많은 책임을 가진 상위 클래스를 역할에 따라 분리했지만 ISP는 역할에 따라 구분해서 사용한다. 이때 자신의 역할을 넘어선 메서드를 가지면 구현 클래스들이 불필요한 메서드에 의존하게 된다.

예를 들어 근무하고 있는 직장에서, 상사가 형이라고 생각해 보자. 그럼 아래 그림처럼 부하 직원의 역할과 동생의 역할을 모두 가질 수도 있다.

![Alt text](<이미지/ISP 두 가지 역할의 인터페이스.png>)

현실 세계에서도 공과 사를 구분해야 하며, 실제로 이런 경우는 드물기 때문에 두 가지 역할이 공존하게 되면 대부분의 직장인과 동생 역할은 불필요한 메서드에 의존하게 된다.

따라서 역할에 맞는 최소한의 메서드만 제공하도록 해야 한다.

추가적으로 인터페이스는 적은 기능을 제공할수록 좋지만, 상위 클래스는 많은 기능을 제공할수록 좋다. 만약 상위 클래스에서 제공하는 기능이 적어, 공통 요소를 올바르게 처리하지 못하면 하위 클래스가 책임을 가지게 되고 이로 인해 상속의 혜택을 온전히 누릴 수 없기 때문이다.

## 의존관계 역전 원칙(DIP)

####  구체적인 것에 의존하지 말고 추상화에 의존하라.

다르게는 '자신보다 변하기 쉬운 것에 의존하지 마라.' 또는 '역할에 의존하게 하라.'라고도 표현할 수 있다.

자신보다 변하기 쉬운 것 즉, 추상화가 아닌 구체화에 의존하면 하위 클래스의 변경이 상위 클래스에도 영향을 미치게 된다. DIP는 OCP와 밀접한 관계를 가지는데, 이렇게 하위 클래스를 변경(확장)했을 때 상위 클래스가 영향을 받으면(변경) OCP도 위반하게 된다.

이런 경우 구체적인 것들을 추상화해서 제3의 역할을 만들고, 상위 클래스와 하위 클래스 모두 제3의 역할에 의존하게 하면 OCP와 DIP를 모두 지킬 수 있게 된다. 기존 하위 클래스는 어떤 것도 의존하지 않던 상태에서 새로운 역할에 의존하게 되므로 이를 의존관계가 역전되었다고 표현한다.