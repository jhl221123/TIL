# 조회수 어뷰징

조회수를 인위적으로 증가시켜 특정 컨텐츠나 상품 등이 인기가 있는 것처럼 꾸미는 행위이다. 조회수가 중요한 역할이 아니라면 쿠키를 사용해서 간단하게 구현해도 문제 없지만 웹툰이나 유튜브처럼 수익과 직결되는 경우는 큰 문제로 이어진다.

#### 쿠키 기반의 조회수 기능의 문제점

사용자가 쿠키를 삭제하는 것만으로도 조회수 조작이 가능해진다. 따라서 사용자가 의도적으로 조작할 수 없도록 다른 방안을 고려해야 한다.

## 사용자 ip 기반 중복 체크

ip로 사용자를 특정하고, 이후 동일한 ip의 요청은 중복 요청으로 간주하고 카운트에서 제외할 수 있다.

1. 요청 정보에서 ip를 추출

2. 키는 ip, 값은 사용자를 식별할 수 있는 부가 정보를 가지는 해시맵을 생성하고 ip 목록을 관리

3. 요청이 있을 때마다 ip 목록과 비교해 중복을 체크하고 중복 요청이 아닌 경우에만 조회수를 증가

간단하게 위와같이 구현해 볼 수 있다. 서버측에서 ip 목록을 관리하기 때문에 쿠키를 사용하지 않고 비교적 안전하게 처리할 수 있지만 다음과 같은 한계가 존재한다.

### VPN을 사용한 ip 조작

* VPN은 가상 터널을 사용하며, 보안상 안전한 통신을 위해 사용한다.

* 통신 과정에서 자신의 ip 주소를 노출시키지 않기 위해 가상의 ip를 사용할 수 있지만, 이를 악용해서 다른 사용자인 것처럼 가장할 수 있다.

### 프록시 서버를 사용한 ip 조작

* 요청이 프록시 서버를 거치게 되면 실제 ip를 가리고 프록시 서버의 ip가 노출된다.

* 동일한 사용자가 여러 프록시 서버를 거쳐 여러 사용자인 것처럼 보이게 악용할 수 있다.

이처럼 ip를 조작하는 것만으로도 사용자를 식별할 수 없게 된다.

## 브라우저 지문을 활용

ip만으로 사용자를 특정할 수 없었다. 여러 가지 정보를 포함시키면 어떨까?

브라우저 지문은 사용자의 브라우징 패턴, 하드웨어 및 소프트웨어 설정 등을 기반으로 생성된 고유한 식별자다. 보통 특정 웹사이트나 서비스를 방문할 때 브라우저에서 자동으로 생성한다. ip 뿐만 아니라 다음과 같이 다양한 정보를 포함한다.

**User-Agent**: 브라우저, 버전, 운영 체제 등의 정보가 포함된 HTTP 헤더

**스크린**: 픽셀 단위의 화면 크기와 해상도 정보

**폰트**: 설치된 폰트 목록 및 설정 정보

**쿠키**: 쿠키 설정과 관련된 정보

**언어, Locale**: 브라우저의 언어 설정 및 지역 정보

**플러그인, 확장 프로그램**: 설치된 플러그인과 확장 프로그램 목록   

**하드웨어**: CPU, 그래픽 카드 등 사용자의 장치 정보

**네트워크**: **ip 주소**, 네트워크 타입 등의 정보

**시간**: 지역 시간대 정보

**웹 스토리지 사용량**, **터치 지원 여부** 등등...

브라우저에서 전달한 브라우저 지문을 서버측에서 관리하고 요청이 올 때마다 지문 정보를 비교한 후, 중복 체크를 할 수 있다. 하지만 여러 사용자가 비슷한 브라우징 환경을 가질 수 있기 때문에 이 역시 완벽하게 문제를 해결할 수 없다.

# 해결 방안

결국 사용자 중복을 체크하기 위해서는 한 가지 방법만으로는 한계가 있다. 다양한 정보를 포함하고 있는 브라우저 지문을 사용해 고유한 식별자를 생성하고, 주기적인 모니터링을 통해 비정상적인 접근을 제한함으로써 독자적인 시스템을 구축하는 것이 중요하다.