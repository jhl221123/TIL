# 커널 스레드

**쓰레드를 생성하고 스케줄링하는 주체가 커널인 쓰레드**

* 커널이 스레드의 존재를 알고 있다.
* 스케줄러가 각각의 스레드를 관리한다.

![Alt text](<이미지/커널스레드.png>)

# 유저 스레드

**사용자들이 만든 라이브러리로 실행되는 스레드**

* 커널이 스레드의 존재를 모른다.
* 스케줄러는 단지 프로세스를 관리할 뿐이다.
  * 해당 프로세스 안에서 스레드가 동작한다.
* 운영체제가 제공하는 기능이 아니다.
* 라이브러리를 통해 커널에 의존적이지 않은 형태의 쓰레드를 제공한다.
  * 커널이 쓰레드 모델을 지원하지 않거나, 제공하는 쓰레드 모델이 마음에 들지 않을 경우 사용한다.

![Alt text](<이미지/유저스레드.png>)

# 차이점

#### 시간할당
* 커널 스레드는 스케줄러에 의해 대등하게 시간을 할당 받는다.
* 유저 스레드는 프로세스가 할당받은 시간 내에서 할당받는다.
  * 동일한 프로세스 내의 스레드만 대등하고 다른 프로세스의 스레드와는 다른 시간을 가지게 된다.

#### 블로킹(IO)
* 커널 스레드가 IO 작업을 하면, 동일한 프로세스에 있는 스레드도 우선순위를 넘겨받을 수 있다.
* 유저 스레드가 IO 작업을 하면, 동일한 프로세스 내의 모든 스레드가 중단된다.
  * 스케줄러는 단지 프로세스가 작업을 중단한 것으로 본다.

#### 속도
* 커널 스레드의 경우, 스레드를 바꿀 때마다 커널 모드로 변경해야한다.
  * 스레드가 프로세스 보다 작기 때문에 프로세스 단위로 전환하는 유저 스레드 보다 전환 빈도가 잦다.
* 유저 스레드의 경우, 프로세스를 관리할 때만 커널 모드를 사용하면 되기 때문에 상대적으로 빠르다.
  * 스레드 실행 권한이 넘어가도 커널 모드로 전환되지 않는다.

# 장단점

## 커널 스레드
* 장점: 커널에서 직접 제공해 주기 때문에 안전성과 다양한 기능 제공
* 단점: 유저 모드에서 커널 모드로의 전환이 빈번하게 일어나서 성능 저하가 발생

## 유저 스레드
* 장점: 모드 간의 전환이 없어 속도가 빠르다.
* 단점: 프로세스 단위의 블로킹