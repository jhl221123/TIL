# VPC(Virtual Private Cloud)

논리적으로 완전히 분리된 가상의 네트워크 공간

사용자의 설정에 따라 자유롭게 구성할 수 있는 공간으로 서브넷 생성, 라우팅 테이블, 네트워크 게이트웨이 구성 등 네트워킹 환경을 원하는 대로 제어할 수 있다. 만약 VPC가 없다면 Cloud 안의 리소스들을 연결하기 위한 추가 작업이 필요하다.

![Alt text](<이미지/VPC 사용 안하는 경우.png>)

이런 구조는 시스템의 복잡도를 높일 뿐만 아니라 인스턴스가 하나만 추가되어도 모든 인스턴스를 수정해야하는 불편함이 생긴다. VPC를 이용하면 논리적으로 네트워크를 구분하고, 같은 VPC를 묶어 리소스를 쉽게 관리할 수 있다.

![Alt text](<이미지/VPN 사용.png>)

이렇게 각각의 VPC는 완전히 독립된 네트워크처럼 작동하게 되며, 각 VPC에 따라 네트워크 설정을 다르게 줄 수도 있게 된다.

## VPC 생성 조건

VPC를 구축하려면 IP 주소 범위를 RFC1918이라는 Private IP 대역에 맞춰야한다. Private IP는 인터넷을 위해 사용하는 것이 아니라 로컬 내부에서 사용하는 IP 주소 대역이다. 우리집(Public IP) 안방(Private IP), 옆집의 안방과 같은 원리이다. 안방처럼 내부에서 쓰는 주소를 Private IP라고 하며 네트워크 내부에서 위치를 찾아갈때 사용한다. 반면, 네트워크 외부에서는 Public IP로 접근한다.

### VPC에서 사용하는 사설 아이피 대역

최대 /16의 IP 네트워크 공간 사용 가능

- 10.0.0.0 ~ 10.255.255.255(10/8 prefix)

- 172.16.0.0 ~ 172.31.255.255(182.16/12 prefix)

- 192.168.0.0 ~ 192.168.255.255(192.168/16 prefix)

## VPC Peering

Private IP 주소로 다른 VPC와 연결해 서로 통신할 수 있도록 하는 기술이다. 게이트웨이, 물리적 하드웨어에 의존하지 않고, VPN 연결도 아니며 오직 프라이빗 IP 주소를 사용하여 서로 통신할 수 있다.

### VPC Peering 연결 순서

피어링 요청 → 피어링 요청 수락 → Route table 및 Security group 내 피어링 경로 업데이트

단방향 통신으로 전이성 피어링이 불가능한 특징이 있다.

![Alt text](<이미지/VPC 동작과 피어링.png>)