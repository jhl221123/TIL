# 프로메테우스

**애플리케이션에서 발생한 메트릭을 수집하는 모니터링 시스템**

* 메트릭이 발생한 순간 뿐만 아니라, DB에 저장된 과거 이력까지 함께 관리
* 애플리케이션의 메트릭을 수집하기 위해 두 가지 설정이 필요
  * 애플리케이션: 프로메테우스가 사용하는 포멧에 맞게 메트릭을 생성하도록 설정
    * 마이크로미터 프로메테우스 구현체를 사용하면 마이크로미터가 수집한 메트릭을 프로메테우스 포멧에 맞게 변환해준다.
  * 프로메테우스: 애플리케이션의 메트릭을 주기적으로 수집하도록 설정
    * 애플리케이션 내 메트릭 위치와 수집 주기 등을 설정해야 한다.
* 한눈에 들어오는 대시보드를 만들기 어렵다.
  * 다른 대시보드 툴을 사용하는 것이 좋다.

## 게이지와 카운터

* 프로메테우스의 메트릭은 크게 두 가지로 구분된다.

### 게이지

* 임의로 오르내릴 수 있는 값
* CPU, 메모리 사용량 또는 사용중인 커넥션 등
* 가장 사용하기 쉬운 메트릭으로 별다른 가공 없이 사용하면 된다.

### 카운터

* 단순하게 증가하는 단일 누적 값
  * 계속해서 증가만 하기 때문에 유의미한 데이터를 얻기 힘들다.
  * increase(), rate() 등을 함께 사용해서 **시간별 추이를 확인하는 것이 유리하다.**
* HTTP 요청수, 로그 발생 수 등