# 인터럽트

**정해진 명령어 사이클이 중단되는 신호**

* 동기 인터럽트(예외)
  * CPU가 예기치 못한 상황을 접했을 때 발생
  * 폴트(재실행), 트랩(다음실행), 중단, 소프트웨어 인터럽트
* 비동기 인터럽트(하드웨어 인터럽트)
  * 문제가 아닌 알림 역할
  * 주로 입출력장치에 의해 발생

### 명령어 사이클

**프로그램 속 명령어들이 반복되며 실행되는 일정한 주기**

* 인출 사이클: 명령어를 메모리에서 CPU로 가져오는 과정
* 실행 사이클: 명령어를 제어 정보로 해독하고 실행하는 과정
* 간접 사이클: 인출 후 바로 실행 사이클로 돌입하지 못할 때 거치는 과정
  * ex) 오퍼랜드에 저장된 주소가 유효 주소라면 메모리 접근이 추가로 필요하다. 

## 인터럽트 처리 순서

**CPU가 인터럽트를 처리 → 인터럽트 서비스 루틴을 실행 → 수행하던 작업으로 복귀**

1. 입출력장치가 CPU에 인터럽트 요청신호를 보낸다.
2. CPU는 실행 사이클이 끝나고 명령어를 인출하기 전 항상 인터럽트 여부를 확인한다.
3. CPU는 인터럽트 요청을 확인하고 인터럽트 플래그를 통해 요청을 받아들일 수 있는 지 확인한다.
4. 인터럽트를 받아들일 수 있다면 CPU는 지금까지의 작업을 백업한다.
5. CPU는 인터럽트 벡터를 참조해서 인터럽트 서비스 루틴을 실행한다.
6. 인터럽트 서비스 루틴 실행이 끝나면 백업해 둔 작업을 복구하여 실행을 재개한다.

> ※ 인터럽트 플래그<br>
→ 인터럽트를 받아들일 수 있는지 표시한다.<br>
→ 표시와 상관없이 막을 수 없는 인터럽트도 있다.<br>
<br>
※ 인터럽트 서비스 루틴<br>
→ 인터럽트를 처리하기 위한 프로그램<br>
→ 메모리 상에 여러 가지 인터럽트 서비스 루틴이 저장되어 있다.<br>
<br>
※ 인터럽트 벡터<br>
→ 인터럽트를 구분하기 위한 정보<br>
→ 각 인터럽트 서비스 루틴의 시작점을 알 수 있다.<br>
<br>
※ 인터럽트 발생 시 백업<br>
→ 인터럽트 시점의 프로그램 카운터, 메모리 주소 레지스터, 메모리 버퍼 레지스터, 명령어 레지스터에 있는 값들을 스택 영역에 백업한다.