# ThreadLocal

**해당 스레드만 접근할 수 있는 특별한 저장소**

* 매개 변수를 통해 전달하지 않아도 값을 공유할 수 있다.
* 스레드 전용 저장 공간에 값이 저장되기 때문에 동시성 문제를 해결할 수 있다.
  * `Thread` 클래스 내부에서 `Map`으로 관리

### 주의사항

**멀티 스레드 환경에서는 사용 후, 반드시 ThreadLocal에 저장된 값을 제거해야 한다.**

* 단일 스레드 환경에서 작업이 끝난 스레드는 곧바로 GC 대상이 된다.
  * 스레드가 관리하는 `ThreadLocal` 역시 GC 대상이 된다.
* WAS와 같은 멀티 스레드 환경에서는 작업이 끝난 스레드를 풀에 반환한다.
  * 반환된 스레드는 여전히 `ThreadLocal` 을 참조한다.
  * 다음 클라이언트가 불필요한 값을 가지지 않도록 스레드를 풀에 반환하기 전에 `ThreadLocal` 을 제거해야 한다.