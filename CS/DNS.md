# DNS(Domain Name System)

IP 주소 및 기타 데이터를 저장하고 도메인 이름별로 쿼리할 수 있게 해주는 계층형 분산 데이터베이스

DNS가 도메인 이름에 대응하는 IP 주소를 구해주기 때문에 사용자는 이해하기 어려운 IP 주소 대신 사용하기 쉬운 도메인 이름을 사용할 수 있다. 이렇게 도메인 이름으로 IP 주소를 구하는 방법을 이름해석 이라고 하는데 DNS는 가장 자주 이용되는 이름해석 방법이다.

![Alt text](<이미지/DNS 개념.png>)

## DNS 서버

DNS를 이용하려면 DNS 서버가 필요하다. DNS 서버에는 도메인 이름과 IP 주소의 대응 관계 그리고 그 밖의 여러 가지 정보를 등록해 두는데 이런 정보를 리소스 레코드라고 한다.

#### 주요 리소스 레코드

|종류|의미|
|---|---|
|A|호스트명에 대응하는 IP 주소|
|AAAA|호스트명에 대응하는 IPv6 주소|
|CNAME|호스트명에 대응하는 별명
|MX|도메인명에 대응하는 메일 서버|
|NS|도메인명을 관리하는 DNS 서버|
|PTR|IP 주소에 대응하는 호스트명|

## DNS의 이름해석

애플리케이션을 이용하는 사용자가 호스트 이름을 지정하면 자동으로 DNS 서버에 대응하는 IP 주소를 질의한다. DNS 서버에 질의하는 기능은 운영체제에 내정되어 있는데, 이를 DNS 리졸버라고 한다.

질의한 호스트명에 관한 정보가 반드시 가까운 DNS 서버에 있다고는 할 수 없다. DNS 서버는 루트를 정점으로 한 계층 구조로 되어 있으며, 가까운 서버에서 호스트명을 찾지 못했다면 루트에서부터 하위 계층으로 내려가며 찾을 때까지 질의를 반복한다.

![Alt text](<이미지/DNS 동작 흐름.png>)

이처럼 이름해석을 반복하는 것을 재귀질의라고 한다. 매번 이렇게 찾는 것은 비효율적이기 때문에 DNS 서버와 리졸버는 해당 호스트명을 한동안 캐시에 보관한다.

## DNS 서버 종류

### Local DNS 서버

* 인터넷을 설치할 때 통신사를 이용하며, 각각의 통신사마다 DNS 서버가 존재
* URL에 Domain Name을 입력했을 때 해당 IP를 찾기위해 가장먼저 찾는 DNS서버

#### 기지국 DNS 서버 종류

|운영주체|기본 DNS|보조 DNS|
|---|---|---|
|KT|168.126.63.1|168.126.63.2|
|LG유플러스|164.124.107.9|203.248.242.2|
|SK브로드밴드|210.220.163.82|219.250.36.130|
|구글|8.8.8.8|8.8.4.4|

### Root DNS 서버

* 최상위 DNS 서버로 해당 DNS 서버부터 시작해서 하위 DNS 서버에게로 차례차례 질의하는 구조
* Local DNS 서버에 도메인에 대한 IP 주소가 없을 때, Root DNS 서버에게 질의

### TLD 서버 (Top-Level Domain, 최상위 도메인 서버)

* Root DNS 바로 아래 단계에 있는 1단계 도메인
* 국가명을 나타내는 국가최상위도메인과 일반적으로 사용되는 일반최상위도메인으로 구분

### Authoritative DNS 서버

* 개인이나 회사의 DNS 서버

### Sub DNS 서버 (최하위 서버)

* www. dev. mail. cafe. 등을 구분하는 최하위 서버
* 동일 서버 내에서 여러 서비스들을 구분하는 DNS