# JPQL(Java Persistence Query Language)

**객체지향 쿼리 언어**

* 테이블을 대상으로 쿼리하는 것이 아니라, 엔티티 객체를 대상으로 쿼리한다.
* **SQL을 추상화**하기 때문에 특정 데이터베이스 SQL에 종속되지 않는다.
* 결국 **SQL로 변환**된다.
    * 연관관계를 고려하지 않고 조회 대상만 반환한다.
    * 참조된 엔티티도 함께 조회하기 위해서는 **페치조인을 사용**해야 한다.

### 문법

``` sql
select m from Member as m where m.age > 18
```

* 엔티티와 속성은 대소문자를 구분하고, JPQL 키워드는 대소문자를 구분하지 않는다.
* 별칭은 필수로 사용해야 한다.(as는 생략가능)

## 묵시적 조인

**join 키워드 없이 join이 발생**

``` sql
select m.team from Member m
select t.members from Team t
```

* 연관 경로(참조)를 통해서 조회할 경우, 묵시적 조인이 발생한다.
    * 객체와 다르게 테이블 상에서는 조인을 통해서만 연관된 데이터를 조회할 수 있기 때문
* 조인이 발생하는 위치를 한눈에 파악하기 힘들다.
    * 튜닝이 어려워진다.
    * 컬렉션을 조회한 경우, 더이상 탐색할 수 없게 된다.

## 명시적 조인

**직접 join 키워드를 사용**

``` sql
select m.name from Team t join t.members m
```

* 명시적 조인을 사용하면 별칭을 사용해 컬렉션에서도 추가 탐색이 가능해진다.
* 쿼리 튜닝도 편리해진다.
* 묵시적 조인을 사용하지 말고 **명시적 조인을 사용하자.**